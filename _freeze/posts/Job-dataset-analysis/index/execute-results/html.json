{
  "hash": "472e1fa4878050bcce4973399f9b372e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Data Cleaning with a Job Description Dataset\"\nauthor: \"Corinne McCumber\"\ndate: \"2024-12-12\"\ncategories: [code, analysis]\nimage: \"Mathematician_analyzing_data.jpg\"\n---\n\n\n\nTime for everyone's favorite: data cleaning.\n\n## Dataset information\n\nThe dataset is called the \"Job description dataset\", and it was downloaded from [Kaggle](https://www.kaggle.com/datasets/ravindrasinghrana/job-description-dataset). It is listed under a CC0 license, and a formal citation can be found below. According to the creator, Ravender Singh Rana, the dataset is \"a rich collection of artificially generated job postings designed to emulate the structure and content of real-world job listings.\"\n\nThe dataset contains 1,615,940 rows and 23 columns. Each row represents a fabricated job listing. Columns of interest include:\n\n- `Job ID`: Unique identifier for each fabricated job listing\n- `Experience`: Preferred years of experience for the job, in the format \"xx to yy Years\"\n- `Qualifications`: Education requirements for this job\n- `Salary Range`: Range of compensation, in the format \"\\$xxK-\\$yyK\"\n- `Work Type`: Type of employment, including Full-Time, Contract, Temporary, etc.\n\n## Setup\n\nRun the following libraries.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(janitor)\n```\n:::\n\n\n\nAnd read in the data.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- read_csv(\"./data/job_descriptions.csv\")\n\nglimpse(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1,615,940\nColumns: 23\n$ `Job Id`           <dbl> 1.089844e+15, 3.984541e+14, 4.816401e+14, 6.881927e…\n$ Experience         <chr> \"5 to 15 Years\", \"2 to 12 Years\", \"0 to 12 Years\", …\n$ Qualifications     <chr> \"M.Tech\", \"BCA\", \"PhD\", \"PhD\", \"MBA\", \"MCA\", \"PhD\",…\n$ `Salary Range`     <chr> \"$59K-$99K\", \"$56K-$116K\", \"$61K-$104K\", \"$65K-$91K…\n$ location           <chr> \"Douglas\", \"Ashgabat\", \"Macao\", \"Porto-Novo\", \"Sant…\n$ Country            <chr> \"Isle of Man\", \"Turkmenistan\", \"Macao SAR, China\", …\n$ latitude           <dbl> 54.2361, 38.9697, 22.1987, 9.3077, -35.6751, 50.503…\n$ longitude          <dbl> -4.5481, 59.5563, 113.5439, 2.3158, -71.5429, 4.469…\n$ `Work Type`        <chr> \"Intern\", \"Intern\", \"Temporary\", \"Full-Time\", \"Inte…\n$ `Company Size`     <dbl> 26801, 100340, 84525, 129896, 53944, 23196, 26119, …\n$ `Job Posting Date` <date> 2022-04-24, 2022-12-19, 2022-09-14, 2023-02-25, 20…\n$ Preference         <chr> \"Female\", \"Female\", \"Male\", \"Female\", \"Female\", \"Ma…\n$ `Contact Person`   <chr> \"Brandon Cunningham\", \"Francisco Larsen\", \"Gary Gib…\n$ Contact            <chr> \"001-381-930-7517x737\", \"461-509-4216\", \"9687619505…\n$ `Job Title`        <chr> \"Digital Marketing Specialist\", \"Web Developer\", \"O…\n$ Role               <chr> \"Social Media Manager\", \"Frontend Web Developer\", \"…\n$ `Job Portal`       <chr> \"Snagajob\", \"Idealist\", \"Jobs2Careers\", \"FlexJobs\",…\n$ `Job Description`  <chr> \"Social Media Managers oversee an organizations soc…\n$ Benefits           <chr> \"{'Flexible Spending Accounts (FSAs), Relocation As…\n$ skills             <chr> \"Social media platforms (e.g., Facebook, Twitter, I…\n$ Responsibilities   <chr> \"Manage and grow social media accounts, create enga…\n$ Company            <chr> \"Icahn Enterprises\", \"PNC Financial Services Group\"…\n$ `Company Profile`  <chr> \"{\\\"Sector\\\":\\\"Diversified\\\",\\\"Industry\\\":\\\"Diversi…\n```\n\n\n:::\n:::\n\n\n\n## Data cleaning \n\nComplete data transformations, primarily to extract numbers such as salary range and experience from character strings. This shows off the wonderful world of regex.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncleaned_data <- data %>%\n  # Clean column names\n  clean_names() %>%\n  \n  # Break experience column into minimum and maximum experience\n  mutate(\n    experience_min = str_extract(experience, \"^[[:digit:]]+\"),\n    experience_max = str_extract(experience, \"[[:digit:]]+ Years\"),\n    experience_max = str_extract(experience_max, \"^[[:digit:]]+\")\n  ) %>%\n  mutate(\n    experience_min = as.numeric(experience_min),\n    experience_max = as.numeric(experience_max)\n  ) %>%\n  relocate(c(experience_min, experience_max), .after=experience) %>%\n\n  # Break qualifications into broader categories\n  mutate(\n    education_level = if_else(str_detect(qualifications, \"^B\"), \"Bachelor's\", NA),\n    education_level = if_else(str_detect(qualifications, \"^M\"), \"Master's\", education_level),\n    education_level = if_else(str_detect(qualifications, \"^Ph\"), \"Doctorate\", education_level)\n  ) %>%\n  relocate(education_level, .after = qualifications) %>%\n\n  # Break salary_range into minimum and maximum salary\n  mutate(\n    salary_min = str_extract(salary_range, \"^\\\\$[[:digit:]]+K\"),\n    salary_max = str_extract(salary_range, \"-\\\\$[[:digit:]]+K\"),\n    salary_min = str_extract(salary_min, \"[[:digit:]]+\"),\n    salary_max = str_extract(salary_max, \"[[:digit:]]+\")\n  ) %>%\n  mutate(\n    salary_min = as.numeric(salary_min),\n    salary_max = as.numeric(salary_max)\n  ) %>%\n  relocate(c(salary_min, salary_max), .after=salary_range)\n\nglimpse(cleaned_data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1,615,940\nColumns: 28\n$ job_id           <dbl> 1.089844e+15, 3.984541e+14, 4.816401e+14, 6.881927e+1…\n$ experience       <chr> \"5 to 15 Years\", \"2 to 12 Years\", \"0 to 12 Years\", \"4…\n$ experience_min   <dbl> 5, 2, 0, 4, 1, 4, 3, 2, 2, 1, 3, 4, 3, 1, 1, 4, 5, 0,…\n$ experience_max   <dbl> 15, 12, 12, 11, 12, 12, 15, 8, 9, 10, 10, 12, 15, 8, …\n$ qualifications   <chr> \"M.Tech\", \"BCA\", \"PhD\", \"PhD\", \"MBA\", \"MCA\", \"PhD\", \"…\n$ education_level  <chr> \"Master's\", \"Bachelor's\", \"Doctorate\", \"Doctorate\", \"…\n$ salary_range     <chr> \"$59K-$99K\", \"$56K-$116K\", \"$61K-$104K\", \"$65K-$91K\",…\n$ salary_min       <dbl> 59, 56, 61, 65, 64, 59, 63, 65, 65, 60, 57, 64, 65, 5…\n$ salary_max       <dbl> 99, 116, 104, 91, 87, 93, 103, 102, 102, 80, 104, 98,…\n$ location         <chr> \"Douglas\", \"Ashgabat\", \"Macao\", \"Porto-Novo\", \"Santia…\n$ country          <chr> \"Isle of Man\", \"Turkmenistan\", \"Macao SAR, China\", \"B…\n$ latitude         <dbl> 54.2361, 38.9697, 22.1987, 9.3077, -35.6751, 50.5039,…\n$ longitude        <dbl> -4.5481, 59.5563, 113.5439, 2.3158, -71.5429, 4.4699,…\n$ work_type        <chr> \"Intern\", \"Intern\", \"Temporary\", \"Full-Time\", \"Intern…\n$ company_size     <dbl> 26801, 100340, 84525, 129896, 53944, 23196, 26119, 40…\n$ job_posting_date <date> 2022-04-24, 2022-12-19, 2022-09-14, 2023-02-25, 2022…\n$ preference       <chr> \"Female\", \"Female\", \"Male\", \"Female\", \"Female\", \"Male…\n$ contact_person   <chr> \"Brandon Cunningham\", \"Francisco Larsen\", \"Gary Gibso…\n$ contact          <chr> \"001-381-930-7517x737\", \"461-509-4216\", \"9687619505\",…\n$ job_title        <chr> \"Digital Marketing Specialist\", \"Web Developer\", \"Ope…\n$ role             <chr> \"Social Media Manager\", \"Frontend Web Developer\", \"Qu…\n$ job_portal       <chr> \"Snagajob\", \"Idealist\", \"Jobs2Careers\", \"FlexJobs\", \"…\n$ job_description  <chr> \"Social Media Managers oversee an organizations socia…\n$ benefits         <chr> \"{'Flexible Spending Accounts (FSAs), Relocation Assi…\n$ skills           <chr> \"Social media platforms (e.g., Facebook, Twitter, Ins…\n$ responsibilities <chr> \"Manage and grow social media accounts, create engagi…\n$ company          <chr> \"Icahn Enterprises\", \"PNC Financial Services Group\", …\n$ company_profile  <chr> \"{\\\"Sector\\\":\\\"Diversified\\\",\\\"Industry\\\":\\\"Diversifi…\n```\n\n\n:::\n:::\n\n\n\n## Visualization 1: Salary range and work type\n\nLet's see if we can uncover how realistic this data is. The visualization below shows the range of minimum and maximum salaries, faceted by work type.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncleaned_data %>%\n  ggplot() +\n  geom_boxplot(aes(x = work_type, y = salary_min, fill = work_type)) +\n  geom_boxplot(aes(x = work_type, y = salary_max, fill = work_type)) +\n  coord_flip() +\n  labs(\n    y = \"Salary min and max in thousands of dollars\",\n    x = \"Work category\",\n    title = \"Boxplot of salary minimum and maximum\",\n    subtitle = \"Faceted by work type\"\n  ) +\n  theme(legend.position=\"none\") +\n  scale_fill_discrete(type = c(\n    `Temporary` = \"#b35806\",\n    `Part-Time` = \"#998ec3\",\n    `Intern` = \"#f1a340\",\n    `Full-Time` = \"#d8daeb\",\n    `Contract` = \"#542788\"\n  ))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/salary-and-work-visualization-1.png){fig-alt='Box plot of salary minimum amounds and maximum amounts, faceted by work type, where the exact same quartiles are shown for each work type, indicating that this is information is not reflective of real world salaries.' width=80%}\n:::\n:::\n\n\n\nColors were chosen using [ColorBrewer](https://colorbrewer2.org) to ensure that they are legible for people who are colorblind. Given that, regardless of work type, all jobs have the same quartile breakdowns for minimum and maximum salary range, it's safe to say that this was rather simply procedurally generated and therefore not of much use in the real world.\n\n## Visualization 2: Experience and education\n\nWhat about experience and education? In real life, we might expect that the higher the level of education, the fewer years of experience required. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncleaned_data %>%\n  ggplot() +\n  geom_density(aes(x = experience_min, fill = education_level)) +\n  geom_density(aes(x = experience_max, fill = education_level)) +\n  facet_wrap( ~ factor(\n    education_level,\n    levels = c(\"Bachelor's\", \"Master's\", \"Doctorate\")\n  )) +\n  theme(legend.position=\"none\") +\n  scale_fill_discrete(type = c(\n    `Bachelor's` = \"#b3cde3\",\n    `Master's` = \"#8c96c6\",\n    `Doctorate` = \"#88419d\"\n  )) +\n  labs(\n    y = \"Density\",\n    x = \"Experience minimums and maximums in years\",\n    title = \"Density plot of experience minimums and maximums\",\n    subtitle = \"Faceted by education level\"\n  ) \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/exp-and-edu-visualization-1.png){fig-alt='Density plot of experience minimum and maximum faceted by education level, where the exact same density peaks are shown regardless of education level, indicating that real-world conclusions cannot be drawn from this data.' width=80%}\n:::\n:::\n\n\n\nColors were again chosen using [ColorBrewer](https://colorbrewer2.org). Given that the experience levels have the same density patterns regardless of education level, this data also is not reflective of the real world. One additional insight is that more jobs were generated with a Bachelor's requirement than with a Master's requirement than with a Doctorate requirement. \n\n## Conclusion\n\nGiven the uniformity of data, this dataset appears to have use as a data cleaning exercise more than anything else.\n\n## References\n\nBrewer, C., Harrower, M., Sheesley, B., Woodruff, A., & Heyman, D. (2013). ColorBrewer: Color advice for maps. https://colorbrewer2.org/\n\nJon, P. (n.d.). Mathematician analyzing data [Graphic]. Wikimedia Commons. Retrieved December 12, 2024, from https://commons.wikimedia.org/wiki/File:Mathematician_analyzing_data._-_DPLA_-_60af5ced0800f6f7d6c99b5587a9ae0e.jpg\n\nRana, R. S. (2023). Job dataset: A comprehensive job dataset for data science, research, and analysis [Dataset]. Kaggle. https://doi.org/10.34740/kaggle/ds/3749643\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}